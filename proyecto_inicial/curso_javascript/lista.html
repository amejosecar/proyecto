<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ejercicio JavaScript 08 abril 2025</title>
    <script src="../js/menu.js" type="module"></script>
  </head>
  <body>
    <h1>Ejercicios de JavaScript</h1>
    <div id="menu"></div>
    <br />

    <h2>Ejercicio 4: Lista de Tareas Simple</h2>

    <table>
      <tr>
        <td>
          <img
            src="../img/OIP_lis.jpg"
            width="275px"
            height="50%"
            style="border: 1px solid black"
          />
        </td>
        <td>
          <p>
            <strong>Ejercicio 4: Lista de Tareas Simple</strong><br />
            Objetivo: Crear una lista de tareas donde se puedan agregar y
            eliminar elementos. <br />
            Requisitos: <br />- Un input para escribir la tarea <br />- Un botón
            para agregar la tarea a la lista <br />- Una lista desordenada (ul)
            donde aparecerán las tareas <br />- Cada elemento de la lista debe
            tener un botón para eliminarlo <br />- Validar que no se puedan
            agregar tareas vacías
            <br />
            <br />
            <strong>revisar el codigo de Aitor para ver que hizo</strong>
            <br />
            <br />
            <strong> MEJORAS PENDIENTE:</strong><br />
            - AGREGAR CAMPO FECHA DE LA TAREA<br />
            - EN EL MENSAJE BORRAR DEBE IR TAREA + FECHA<br />
            - COLOCAR LAS TAREAS DENTRO DE UNA TABLA<br />
            - VALIDAR EL ULTIMO VALOR PARA LIMPIAR EL ARRAY<br />
          </p>
        </td>
      </tr>
    </table>

    <br />

    <!-- Aquí los botones debajo de la tabla -->
    <input
      type="text"
      id="tarea_new"
      maxlength="40"
      placeholder="Escribe una tarea"
    />
    <button id="agregar_tarea">Agregar Tarea</button>
    <button id="boton_limpiar">Limpiar toda la lista</button>

    <br />
    <label for="">Lista de Tareas</label>
    <ul id="lista-tareas"></ul>
    <label for="">Mostrar el Array</label>
    <div id="mostrar_array">...</div>
    <br />

    <script>
      // //funcion para agregar la tarea a la lista y mostrar en html
      // const renderizarListado = function () {
      //   listado = document.getElementById("lista-tareas");
      //   listado.innerHTML = "";
      //   tareas_array.forEach((tareas_array, indice) => {
      //     itemTarea = document.createElement("li");
      //     itemTarea.innerText = tareas_array + " ";
      //     itemBoton = document.createElement("button");
      //     itemBoton.innerText = "Borrar";
      //     itemBoton.addEventListener("click", () => borrarItem(indice));
      //     itemTarea.appendChild(itemBoton);
      //     console.log(itemTarea);
      //     listado.appendChild(itemTarea);
      //   });
      // };
      // function agregarTarea() {
      //   // codigo para mostrar la tarea en la consola
      //   // const agregarTarea = function () {
      //   //   let input_tareas = document.getElementById("tarea_new"); // Obtener el valor del input
      //   //   // aqui vamos a valiar que no este vacio el campo input
      //   //   if (input_tareas.value.trim() === "") {
      //   //     console.log("Por favor, escribe una tarea."); // mensaje sobre el campo tarea vacío
      //   //     return; // Salimos de la función para no continuar
      //   //   } else {
      //   //     let tareaNueva = input_tareas.value;
      //   //     input_tareas.value = ""; // Limpiar el input después de agregar la tarea
      //   //     console.log(tareaNueva); // Mostrar la tarea en la consola
      //   //     tareas_array.unshift(tareaNueva);
      //   //     console.log(tareas_array); // Mostrar el array actualizado en la consola
      //   //   }
      //   // };
      //   // Obtener referencias a los elementos del DOM
      //   let inputTareaNew = document.getElementById("tarea_new"); // Campo de entrada para la tarea input
      //   let botonAgregar = document.getElementById("agregar_tarea"); // Botón para agregar la tarea
      //   let listaTareas = document.getElementById("lista-tareas"); // Lista desordenada donde se mostrarán las tareas
      //   let tareas_array = []; // Array para almacenar las tareas

      //   let tareaTexto = inputTareaNew.value.trim(); // Obtener el texto de la tarea y eliminar espacios en blanco

      //   // aqui vamos a valiar que no este vacio el campo input
      //   if (tareaTexto === "") {
      //     alert("Por favor, escribe una tarea."); // mensaje sobre el campo tarea esta vacío
      //     document.getElementById("tarea_new").value = ""; // Limpia el el box tarea
      //     return; // Salir de la función si está vacío
      //   }

      //   const li = document.createElement("li"); // Crear un nuevo elemento de lista
      //   li.textContent = tareaTexto; // Establecer el texto de la tarea
      //   tareas_array.unshift(tareaTexto); // Agregar la tarea al array al inicio
      //   console.log(tareas_array); // Mostrar el array actualizado en la consola

      //   // const botonEliminar = document.createElement("button"); // Crear un botón para eliminar la tarea
      //   // botonEliminar.textContent = "Eliminar";
      //   // botonEliminar.addEventListener("click", function () {
      //   //   listaTareas.removeChild(li); // Eliminar la tarea de la lista al hacer clic en el botón
      //   //   tareas_array = tareas_array.filter((tarea) => tarea !== tareaTexto); // Eliminar la tarea del array
      //   //   mostrarArrayEnHTML(); // Actualizar la vista del array en HTML
      //   //   alert("Se elimino la tarea"); // mensaje sobre el campo tarea esta vacío
      //   // });
      //   // listaTareas.appendChild(li); // Agregar el elemento de lista a la lista desordenada
      //   // li.appendChild(botonEliminar); // Agregar el botón al elemento de lista
      //   // let div_resultados = document.getElementById("mostrar_array");
      //   // document.getElementById("tarea_new").value = ""; // Limpia el el box tarea
      //   // mostrarArrayEnHTML(); // Actualizar la vista del array en HTML
      //   renderizarListado();
      // }
      // // Función para mostrar el array en el HTML
      // function mostrarArrayEnHTML() {
      //   const div_resultados = document.getElementById("mostrar_array"); // Seleccionar el contenedor
      //   div_resultados.textContent = JSON.stringify(tareas_array); // Mostrar el array como texto
      // }
      // // Agregar un evento al botón para agregar la tarea al hacer clic
      // botonAgregar.addEventListener("click", agregarTarea);

      // function limpiarInput() {
      //   document.getElementById("lista-tareas").innerHTML = ""; // Limpia la lista de tareas
      //   document.getElementById("tarea_new").value = ""; // Limpia el el box tarea
      //   document.getElementById("mostrar_array").innerHTML = ""; // Limpia el array
      //   tareas_array = []; // Reinicia el array de tareas
      //   console.log(tareas_array); // Mostrar el array actualizado en la consola
      // }

      // // Agregar un evento al botón para limpiar el input al hacer clic

      // document
      //   .getElementById("boton_limpiar")
      //   .addEventListener("click", limpiarInput);

      // Declarar el array de tareas globalmente para almacenar las tareas
      let tareas_array = [];

      // // Función para mostrar el array en el HTML
      function mostrarArrayEnHTML() {
        const div_resultados = document.getElementById("mostrar_array"); // Seleccionar el contenedor
        div_resultados.textContent = JSON.stringify(tareas_array); // Mostrar el array como texto
      }

      // Obtener referencias a los elementos del DOM
      const inputTareaNew = document.getElementById("tarea_new"); // Campo de entrada para la tarea input
      const botonAgregar = document.getElementById("agregar_tarea"); // Botón para agregar la tarea
      const listaTareas = document.getElementById("lista-tareas"); // Lista desordenada donde se mostrarán las tareas

      // Función para renderizar el listado en el HTML
      const renderizarListado = function () {
        listaTareas.innerHTML = ""; // Limpiar la lista antes de renderizar
        tareas_array.forEach((tarea, indice) => {
          const itemTarea = document.createElement("li"); // Crear un elemento <li>
          itemTarea.innerText = tarea + " "; // Establecer el texto del elemento <li>

          const itemBoton = document.createElement("button"); // Crear botón "Borrar"
          itemBoton.innerText = "Borrar";
          itemBoton.addEventListener("click", () => borrarItem(indice)); // Asignar evento para eliminar tarea
          itemTarea.appendChild(itemBoton); // Agregar el botón al elemento <li>
          listaTareas.appendChild(itemTarea); // Agregar el elemento <li> a la lista <ul>
          mostrarArrayEnHTML(); // Mostrar el array actualizado en el HTML
        });
      };

      // Función para agregar una tarea
      function agregarTarea() {
        const tareaTexto = inputTareaNew.value.trim(); // Obtener y limpiar el texto del input

        // Validar que el input no esté vacío
        if (tareaTexto === "") {
          alert("Por favor, escribe una tarea."); // Mostrar mensaje de alerta si está vacío
          return; // Salir de la función si no hay texto
        }

        tareas_array.unshift(tareaTexto); // Agregar la tarea al inicio del array
        inputTareaNew.value = ""; // Limpiar el input
        renderizarListado(); // Actualizar el listado en el HTML
      }

      // Función para eliminar una tarea
      const borrarItem = function (indice) {
        if (confirm(`¿Quieres eliminar la tarea ${tareas_array[indice]}?`)) {
          tareas_array.splice(indice, 1); // Eliminar tarea del array por índice
          renderizarListado(); // Actualizar el listado en el HTMLlista.html
        }
      };

      // Función para limpiar todo el contenido
      function limpiarInput() {
        listaTareas.innerHTML = ""; // Limpiar la lista de tareas
        inputTareaNew.value = ""; // Limpiar el input
        tareas_array = []; // Reiniciar el array
        mostrar_array.innerHTML = ""; // Limpiar el array en el HTML
      }

      // Asignar eventos a los botones
      botonAgregar.addEventListener("click", agregarTarea); // Evento para agregar tarea
      document
        .getElementById("boton_limpiar")
        .addEventListener("click", limpiarInput); // Evento para limpiar tareas
    </script>
  </body>
</html>
